{"ast":null,"code":"import _slicedToArray from\"D:/React2/Redux/Redux/Advanced Redux/01-starting-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Cart from\"./components/Cart/Cart\";import Layout from\"./components/Layout/Layout\";import Products from\"./components/Shop/Products\";import{useSelector,useDispatch}from\"react-redux\";import{Fragment,useEffect}from\"react\";import useHttp from\"./hooks/use-http\";import styles from\"./components/Layout/Notifications.module.css\";import{useState}from\"react\";import{manageCartActions}from\"./store/manageCartSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showNotification=_useState2[0],setShowNotification=_useState2[1];var showCart=useSelector(function(state){return state.cart.show;});var cart=useSelector(function(state){return state.add;});/////////////\nvar _useHttp=useHttp(),isLoading=_useHttp.isLoading,error=_useHttp.error,sendData=_useHttp.requestFn;useEffect(function(){if(!cart.changed){return;}var submitFn=function submitFn(){setShowNotification(true);};sendData({url:\"https://food-e7d7c-default-rtdb.firebaseio.com/cart.json\",method:\"PUT\",body:cart,headers:{\"Content-Type\":\"application/json\"}},submitFn);},[sendData,cart]);///////////\nvar dispatch=useDispatch();var _useHttp2=useHttp(),loadingForFetch=_useHttp2.isLoading,errorDuringFetch=_useHttp2.error,getData=_useHttp2.requestFn;useEffect(function(){var submitFn=function submitFn(data){dispatch(manageCartActions.replaceCart({items:data.items,totalQuantity:data.TotalQuantity}));console.log(data.items,\"dddddd\");};getData({url:\"https://food-e7d7c-default-rtdb.firebaseio.com/cart.json\"},submitFn);},[getData,dispatch]);///////////\nvar content;if(error){content=/*#__PURE__*/_jsxs(\"div\",{className:styles.error,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Failed!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Something went wrong!\"})]});}if(isLoading){content=/*#__PURE__*/_jsx(\"div\",{className:styles.loading,children:/*#__PURE__*/_jsx(\"h2\",{children:\"Sending...\"})});}if(!isLoading&&!error&&showNotification){content=/*#__PURE__*/_jsxs(\"div\",{className:styles.success,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Success!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Send Cart Data Successfully\"})]});}return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.notification,children:content}),/*#__PURE__*/_jsxs(Layout,{children:[showCart&&/*#__PURE__*/_jsx(Cart,{}),/*#__PURE__*/_jsx(Products,{})]})]});}export default App;","map":{"version":3,"names":["Cart","Layout","Products","useSelector","useDispatch","Fragment","useEffect","useHttp","styles","useState","manageCartActions","App","showNotification","setShowNotification","showCart","state","cart","show","add","isLoading","error","sendData","requestFn","changed","submitFn","url","method","body","headers","dispatch","loadingForFetch","errorDuringFetch","getData","data","replaceCart","items","totalQuantity","TotalQuantity","console","log","content","loading","success","notification"],"sources":["D:/React2/Redux/Redux/Advanced Redux/01-starting-project/src/App.js"],"sourcesContent":["import Cart from \"./components/Cart/Cart\";\nimport Layout from \"./components/Layout/Layout\";\nimport Products from \"./components/Shop/Products\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Fragment, useEffect } from \"react\";\nimport useHttp from \"./hooks/use-http\";\nimport styles from \"./components/Layout/Notifications.module.css\";\nimport { useState } from \"react\";\nimport { manageCartActions } from \"./store/manageCartSlice\";\n\nfunction App() {\n  const [showNotification, setShowNotification] = useState(false);\n  const showCart = useSelector((state) => {\n    return state.cart.show;\n  });\n  const cart = useSelector((state) => {\n    return state.add;\n  });\n\n  /////////////\n\n  const { isLoading, error, requestFn: sendData } = useHttp();\n  useEffect(() => {\n    if (!cart.changed) {\n      return;\n    }\n    const submitFn = () => {\n      setShowNotification(true);\n    };\n    sendData(\n      {\n        url: \"https://food-e7d7c-default-rtdb.firebaseio.com/cart.json\",\n        method: \"PUT\",\n        body: cart,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      },\n      submitFn\n    );\n  }, [sendData, cart]);\n\n  ///////////\n\n  const dispatch = useDispatch();\n  const {\n    isLoading: loadingForFetch,\n    error: errorDuringFetch,\n    requestFn: getData,\n  } = useHttp();\n\n  useEffect(() => {\n    const submitFn = (data) => {\n      dispatch(\n        manageCartActions.replaceCart({\n          items: data.items,\n          totalQuantity: data.TotalQuantity,\n        })\n      );\n      console.log(data.items, \"dddddd\");\n    };\n    getData(\n      {\n        url: \"https://food-e7d7c-default-rtdb.firebaseio.com/cart.json\",\n      },\n      submitFn\n    );\n  }, [getData, dispatch]);\n\n  ///////////\n  let content;\n\n  if (error) {\n    content = (\n      <div className={styles.error}>\n        <h2>Failed!</h2>\n        <p>Something went wrong!</p>\n      </div>\n    );\n  }\n  if (isLoading) {\n    content = (\n      <div className={styles.loading}>\n        <h2>Sending...</h2>\n      </div>\n    );\n  }\n  if (!isLoading && !error && showNotification) {\n    content = (\n      <div className={styles.success}>\n        <h2>Success!</h2>\n        <p>Send Cart Data Successfully</p>\n      </div>\n    );\n  }\n\n  return (\n    <Fragment>\n      <div className={styles.notification}>{content}</div>\n\n      {/* <div className={styles.notification}>{content}</div> */}\n\n      <Layout>\n        {showCart && <Cart />}\n        <Products />\n      </Layout>\n    </Fragment>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}